<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高性能π求め機</title>
</head>
<body>

    <h1>逆ビュフォンの針</h1>

    <lable>あなたは、何回針を投げますか？:</lable>
    <input type="text" id="numberInput">
    <button onclick="calculate()">calculate</button>
    <button onclick="deleteCanvas()">clear</button>

    <!-- Canvas要素 -->
    <canvas id="myCanvas" width="2000" height="400"></canvas>

    <script>
        function calculate(){
            var inputValue = document.getElementById("numberInput").value;
            var x = parseFloat(inputValue);

            var piValue = Math.PI;

            var result = x/piValue;

            var Buffoninteger = Math.floor(result); //交差する針の本数

        

        

        // Canvas要素を取得
       
        var context = document.getElementById("myCanvas").getContext("2d");

        // 平行線の描画関数
        function drawParallelLines(y){
            context.beginPath();
            context.moveTo(5,y);
            context.lineTo(1000,y);
            context.stroke();
        }

         // 垂直な線の描画関数
         function drawShortLine(x,startY1, length){
            context.beginPath();
            context.moveTo(x,startY1 + length);
            context.lineTo(x,startY1- length);
            context.stroke();
         }

        // 平行線を描画
        
        var startY1 = 100;    // 最初の線のY座標
        var startY2 = 350;    // 2番目の線のY座標

        drawParallelLines(startY1); // 最初の線を描画
        drawParallelLines(startY2); // 2番目の線を描画

     
        

        // 短い線を描画
        var startX = 10; // 最初の短い線のX座標
        var lineLength = 30; // 短い線の長さ
        var lineSpacing = 15; // 短い線と短い線の間隔

        for (var i = 0; i < Buffoninteger; i++) {
            drawShortLine(startX, startY1, lineLength);
            startX += lineSpacing; // X座標を調整して次の短い線を描画
        }

        // 斜めの線を描画する関数
        function drawDiagonalLine(x1, y1, x2, y2) {
            context.beginPath();
            context.moveTo(x1, y1);
            context.lineTo(x2, y2);
            context.stroke();
        }

       
var newinput = Math.floor(inputValue); //入力された値が少数だった時対策

        for (var i = 0; i < newinput-Buffoninteger; i++) {
            var diagonalX1 = 5 + i * 10; // 斜め線の開始X座標
            var diagonalY1 = startY1 + 100; // 斜め線の開始Y座標
            var diagonalX2 = 10 + i * 10; // 斜め線の終了X座標
            var diagonalY2 = startY2 - 100; // 斜め線の終了Y座標
            drawDiagonalLine(diagonalX1, diagonalY1, diagonalX2, diagonalY2);
        }
        
        
        }

        function deleteCanvas(){
            var canvas = document.getElementById("myCanvas");
        
        canvas.width = canvas.width;

        }

       


    </script>
    
</body>
</html>